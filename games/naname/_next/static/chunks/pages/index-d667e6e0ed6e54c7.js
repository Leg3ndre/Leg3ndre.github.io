(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2082:t=>{t.exports={version:"gameVersion_version__v7Ulq",currentVersion:"gameVersion_currentVersion__4gcAt"}},2366:t=>{t.exports={bgm:"bgmAudio_bgm__3Ys8j",bgmDesc:"bgmAudio_bgmDesc__dlJyd",composer:"bgmAudio_composer__RI_3P"}},3273:t=>{t.exports={desc:"gameDesc_desc__azcQI",abstract:"gameDesc_abstract__p4doZ",playManual:"gameDesc_playManual__7ktkN"}},3413:t=>{t.exports={difficulty:"gameDifficulty_difficulty__mNYtG"}},5855:t=>{t.exports={scores:"index_scores__c1eQ3",pl_score:"index_pl_score__VhfVA",en_score:"index_en_score__ilKsR"}},6366:t=>{t.exports={gameOver:"gameOver_gameOver__r7lTb",gameOverHeader:"gameOver_gameOverHeader__NhecN",gameOverScore:"gameOver_gameOverScore__8UeVV",tweetButton:"gameOver_tweetButton__hZPfp",twitterStr:"gameOver_twitterStr__BU58w"}},6760:(t,i,e)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(9417)}])},9120:t=>{t.exports={gameContainer:"gameCanvas_gameContainer__8khmy",gameCanvas:"gameCanvas_gameCanvas__v5Dar",fps:"gameCanvas_fps__GX8f1"}},9417:(t,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>V});var s=e(7876),r=e(5855),o=e.n(r),h=e(4232),n=e(3273),a=e.n(n);let c=()=>(0,s.jsxs)("div",{className:a().desc,children:[(0,s.jsx)("p",{className:a().abstract,children:"固定視点の3Dシューティングゲームです。 プレイヤーから見て右上にカメラが固定されているため、上移動と左移動の区別は遠近感でがんばってください。"}),(0,s.jsxs)("ul",{className:a().playManual,children:[(0,s.jsx)("li",{children:"画面右から次々現れる敵を倒し、スコアを稼いでください"}),(0,s.jsx)("li",{children:"プレイヤーが操作する自機は赤い紙飛行機です。敵に弾を当てると倒すことができます"}),(0,s.jsx)("li",{children:"敵の弾が自機に当たるとライフが減ります"}),(0,s.jsx)("li",{children:"※ Safariでのプレイは想定通りのゲーム速度にならない可能性が高いため非推奨です"}),(0,s.jsx)("li",{children:"操作方法"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"↑ or W: 上へ移動"}),(0,s.jsx)("li",{children:"↓ or S: 下へ移動"}),(0,s.jsx)("li",{children:"← or A: 左へ移動"}),(0,s.jsx)("li",{children:"→ or D: 右へ移動"}),(0,s.jsx)("li",{children:"X or E: 前へ移動"}),(0,s.jsx)("li",{children:"Z or Q: 後ろへ移動"}),(0,s.jsx)("li",{children:"Space or Enter: 弾を発射"})]})]})]});var l=e(4796),d=e(9120),u=e.n(d),p=e(3413),m=e.n(p);let w=t=>{let{difficulty:i,setDifficulty:e}=t,r=t=>{e(t.target.value)};return(0,s.jsx)("div",{className:m().difficulty,children:[{label:"簡単モード（オブジェクトの影を表示）",value:"1"},{label:"普通モード",value:"2"},{label:"難関モード（遠近感をなくす）",value:"3"}].map(t=>(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",name:"difficulty",value:t.value,checked:t.value==i,onChange:r}),t.label]},t.value))})},g=()=>{let t=(0,h.useRef)({});(0,h.useEffect)(()=>(document.addEventListener("keydown",i),document.addEventListener("keyup",e),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",e)}),[]);let i=i=>{t.current[i.key]=!0},e=i=>{delete t.current[i.key]};return t.current},f=(t,i)=>{let e=(0,h.useRef)(0),s=(0,h.useRef)(0),r=(0,h.useRef)(0),o=(0,h.useRef)(0),n=(0,h.useRef)([]),a=(0,h.useCallback)(()=>{e.current=requestAnimationFrame(a);let i=Date.now();i-s.current+1<25||(s.current=i,t(),c())},[t]),c=()=>{let t=Date.now();n.current.push(t),n.current=n.current.slice(-100),t-r.current<1e3||(r.current=t,o.current=n.current.length/((t-n.current[0])/1e3),i(Math.round(10*o.current)/10))};(0,h.useEffect)(()=>(e.current=requestAnimationFrame(a),()=>cancelAnimationFrame(e.current)),[a])};var v=e(6691);class _{buildGraphics(){let t=new v.YJl;for(let i of this.wLines)t.add(i);for(let i of this.sLines)t.add(i);return t}buildSLines(){let t=[];for(let i=0;i<=16;++i){let e=new v.LoY;e.setFromPoints(this.buildSLineEdges(i)),t.push(new v.N1A(e,this.material))}return t}buildWLines(){let t=[];for(let i=0;i<=32;++i){let e=new v.LoY;e.setFromPoints(this.buildWLineEdges(i)),t.push(new v.N1A(e,this.material))}return t}buildSLineEdges(t){let i=50*t-400;return[new v.Pq0(-800,i,-400),new v.Pq0(800,i,-400)]}buildWLineEdges(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=50*t-800,s=1.5*i%50;return[new v.Pq0(e-s,-400,-400),new v.Pq0(e-s,400,-400)]}moveWLines(t){for(let[i,e]of this.wLines.entries())e.geometry.setFromPoints(this.buildWLineEdges(i,t))}constructor(){this.material=new v.mrM({color:0xc0d0e0}),this.sLines=this.buildSLines(),this.wLines=this.buildWLines()}}class x{tick(){this.count+=this.VELOCITY,this.builder.moveWLines(this.count)}constructor(){this.VELOCITY=3,this.count=0,this.builder=new _,this.graphics=this.builder.buildGraphics()}}class y{buildGraphics(){return this.group.add(this.buildWing()),this.group.add(this.buildBody()),this.group}buildWing(){let t=new v.LoY;return t.setFromPoints(this.buildWingEdges()),new v.N1A(t,this.material)}buildWingEdges(){let t=this.r;return[new v.Pq0(+t,0*t,0),new v.Pq0(t*Math.cos(2*Math.PI/3),t*Math.sin(2*Math.PI/3),0),new v.Pq0(t*Math.cos(4*Math.PI/3),t*Math.sin(4*Math.PI/3),0),new v.Pq0(+t,0*t,0)]}buildBody(){let t=new v.LoY;return t.setFromPoints(this.buildBodyEdges()),new v.N1A(t,this.material)}buildBodyEdges(){let t=this.r;return[new v.Pq0(+t,0,0*t),new v.Pq0(t*Math.cos(2*Math.PI/3),0,0),new v.Pq0(t*Math.cos(4*Math.PI/3),0,t*Math.sin(4*Math.PI/3)),new v.Pq0(+t,0,0*t)]}colorNormal(){for(let t of this.group.children)t.material=this.material}colorAttacked(){for(let t of this.group.children)t.material=this.materialAttacked}buildShadow(){let t=new v.LoY;t.setFromPoints(this.buildWingEdges());let i=new v.mrM({color:this.shadowColor}),e=new v.YJl;return e.add(new v.eaF(t,i)),e}constructor(){this.material=new v.mrM({color:0xff0000}),this.materialAttacked=new v.mrM({color:0xffffff}),this.group=new v.YJl,this.r=20,this.shadowColor=9474192}}class b{buildGraphics(){return new v.eaF(this.geometry,this.material)}dispose(){this.material.dispose(),this.geometry.dispose()}constructor(t,i){this.wSegments=32,this.hSegments=15,this.material=new v.V9B({color:t}),this.geometry=new v.Gu$(i,this.wSegments,this.hSegments)}}class S{tick(){this.position.add(this.velocity),this.position.x>800&&(this.isAlive=!1),this.position.x<-800&&(this.isAlive=!1),this.position.y>480&&(this.isAlive=!1),this.position.y<-480&&(this.isAlive=!1),this.position.z>480&&(this.isAlive=!1),this.position.z<-480&&(this.isAlive=!1)}isAttacking(t,i){let e=this.radius+i,s=this.position.clone().sub(t);return Math.abs(s.x)<e&&Math.abs(s.y)<e&&Math.abs(s.z)<e}dispose(){this.builder.dispose()}constructor(t,i,e){this.radius=10,this.isAlive=!0,this.builder=new b(e,this.radius),this.graphics=this.builder.buildGraphics(),Object.assign(this.graphics.position,t.clone()),this.position=this.graphics.position,this.velocity=i.clone()}}class O{tick(){for(let t of this.list)t.tick();this.removeDeadShot()}generate(t){let i=new S(t,new v.Pq0(this.velocity,0,0),this.SHOT_COLOR);this.list.push(i),this.graphics.add(i.graphics)}isAttacking(t,i){for(let e of this.list)if(e.isAttacking(t,i))return!0;return!1}removeDeadShot(){for(let t of this.list)t.isAlive||(this.graphics.remove(t.graphics),t.dispose());this.list=this.list.filter(t=>t.isAlive)}constructor(){this.list=[],this.velocity=15,this.SHOT_COLOR=0xd0d000,this.graphics=new v.YJl}}class M{tick(t,i,e){this.updatePosition(t),this.shoot(t),this.shotList.tick(),this.processDameged(i,e),this.isInvincible()&&this.restIFrame--}updatePosition(t){let i=this.position;(t.w||t.ArrowUp)&&(i.z+=this.velocity),(t.s||t.ArrowDown)&&(i.z-=this.velocity),(t.a||t.ArrowLeft)&&(i.y+=this.velocity),(t.d||t.ArrowRight)&&(i.y-=this.velocity),(t.e||t.x)&&(i.x+=this.velocity),(t.q||t.z)&&(i.x-=this.velocity),this.regularizePosition(),this.shadowGraphics.position.x=i.x,this.shadowGraphics.position.y=i.y,this.shadowGraphics.position.z=-400}regularizePosition(){this.position.x=Math.max(Math.min(this.position.x,800),-800),this.position.y=Math.max(Math.min(this.position.y,400),-400),this.position.z=Math.max(Math.min(this.position.z,400),-400)}shoot(t){if(this.restSFrame>0){this.restSFrame-=1;return}(t[" "]||t.Enter)&&(this.shotList.generate(this.position),this.restSFrame=40/this.SHOOT_PER_SEC)}processDameged(t,i){!this.isInvincible()&&this.detectAttacked(t,i)&&(this.life--,this.restIFrame=20),this.isInvincible()?this.builder.colorAttacked():this.builder.colorNormal()}detectAttacked(t,i){for(let i of t)if(i.isAttacking(this.position,this.radius))return!0;for(let t of i)if(t.isAttacking(this.position,this.radius))return!0;return!1}isInvincible(){return this.restIFrame>0}constructor(){this.radius=15,this.velocity=12,this.life=5,this.shotList=new O,this.SHOOT_PER_SEC=3,this.restSFrame=0,this.restIFrame=0,this.builder=new y,this.graphics=this.builder.buildGraphics(),this.shadowGraphics=this.builder.buildShadow(),this.position=this.graphics.position}}class P{buildGraphics(t){let i=new v.Zpd(t,0),e=new v.eaF(i,this.material);return e.rotation.z=-Math.PI/4,e.rotation.y=-Math.PI/3,this.group.add(e),this.group}doDeadAction(){this.group.rotation.x+=.4,this.group.rotation.z+=.4}buildShadow(t){let i=new v.LoY;i.setFromPoints([new v.Pq0(t*Math.cos(Math.PI/3),t*Math.sin(Math.PI/3),0),new v.Pq0(t*Math.cos(3*Math.PI/3),t*Math.sin(3*Math.PI/3),0),new v.Pq0(t*Math.cos(5*Math.PI/3),t*Math.sin(5*Math.PI/3),0)]);let e=new v.mrM({color:this.shadowColor}),s=new v.YJl;return s.add(new v.eaF(i,e)),s}dispose(){for(let t of this.group.children)t.material.dispose(),t.geometry.dispose()}constructor(t){this.shadowColor=9474192,this.material=new v.G_z({color:t}),this.group=new v.YJl}}class E{tick(t,i){if(this.isShotDown)return this.tickBeforeDead();this.count++,this.position.add(this.velocity),this.position.x<-800&&(this.isAlive=!1),this.shadowGraphics.position.x=this.position.x,this.shadowGraphics.position.y=this.position.y,this.shadowGraphics.position.z=-400,t.isAttacking(this.position,this.radius)&&(this.isShotDown=!0)}tickBeforeDead(){this.countBeforeDead++;this.position.x+=1.5,this.position.z-=1.5*this.countBeforeDead,this.builder.doDeadAction(),this.countBeforeDead>=20&&(this.isAlive=!1)}shoot(t){return!this.isAlive||this.isShotDown||(this.countForShoot+=1,this.countForShoot<40/this.SHOOT_PER_SEC)?null:(this.countForShoot-=40/this.SHOOT_PER_SEC,this.buildNewShot(t))}buildNewShot(t){let i=new v.Pq0;return i.randomDirection().multiplyScalar(this.SHOOT_SPEED),i.x=-Math.abs(i.x),i.add(this.velocity),new S(this.position,i,this.SHOT_COLOR)}isAttacking(t,i){if(!this.isAlive)return!1;let e=this.radius+i,s=this.position.clone().sub(t);return Math.abs(s.x)<e&&Math.abs(s.y)<e&&Math.abs(s.z)<e}dispose(){this.builder.dispose()}constructor(t=0xe0e0e0){this.radius=40,this.isAlive=!0,this.isShotDown=!1,this.SHOT_COLOR=0xe0e0e0,this.SHOOT_PER_SEC=8,this.SHOOT_SPEED=6,this.count=0,this.countForShoot=0,this.countBeforeDead=0,this.builder=new P(t),this.graphics=this.builder.buildGraphics(this.radius),this.shadowGraphics=this.builder.buildShadow(this.radius),Object.assign(this.graphics.position,new v.Pq0(800,(2*Math.random()-1)*400,(2*Math.random()-1)*400)),this.position=this.graphics.position,this.velocity=new v.Pq0(-3,0,0).multiplyScalar(1.5)}}let k=E;class L extends k{tick(t,i){this.updateVelocity(i),super.tick(t)}updateVelocity(t){this.velocity.y=-.0125*(this.position.y-t.y),this.velocity.z=-.0125*(this.position.z-t.z)}buildNewShot(t){let i=new v.Pq0;return i.x=-Math.abs(this.position.x-t.x),i.y=-(this.position.y-t.y),i.z=-(this.position.z-t.z),i.normalize().multiplyScalar(this.SHOOT_SPEED),new S(this.position,i,this.SHOT_COLOR)}constructor(){super(0xf04040),this.SHOT_COLOR=0xffd0d0,this.SHOOT_PER_SEC=1}}class A extends k{tick(t){this.randomizeVelocity(),super.tick(t)}randomizeVelocity(){let t=.75*(4+6*Math.random()),i=1-2*Math.floor(2*Math.random()),e=(.1*this.count+Math.random())*i;this.velocity.y=t*Math.cos(e),this.velocity.z=t*Math.sin(e)}constructor(){super(5263600),this.SHOT_COLOR=0xc0d0ff}}class j extends k{buildNewShot(){let t=.6*this.count/40,i=new v.Pq0(-.5,2*Math.sin(5*t)*Math.cos(t),2*Math.sin(5*t)*Math.sin(t));return i.normalize().multiplyScalar(this.SHOOT_SPEED),i.add(this.velocity),new S(this.position,i,this.SHOT_COLOR)}constructor(){super(57344),this.SHOT_COLOR=0xd0ffd0,this.SHOOT_PER_SEC=5,this.SHOOT_SPEED=3}}class D{tick(t,i){for(let e of(this.count++,this.canGenerate()&&this.generate(),this.list)){e.tick(t,i);let s=e.shoot(i);null!=s&&(this.shotList.push(s),this.graphics.add(s.graphics))}for(let t of(this.removeDeadEnemies(),this.shotList))t.tick();this.removeDeadShot()}generate(){let t,i=Math.floor(3e4*Math.random());t=i%3==0?new L:i%3==1?new A:new j,this.list.push(t),this.graphics.add(t.graphics),this.shadowGraphics.add(t.shadowGraphics)}canGenerate(){return this.count<=1200?this.count%120==0:this.count<=2400?this.count%80==0:this.count<=4800?this.count%40==0:this.count%20==0}removeDeadEnemies(){for(let t of(this.countShotDown=this.list.filter(t=>!t.isAlive&&t.isShotDown).length,this.list))t.isAlive||(this.graphics.remove(t.graphics),this.shadowGraphics.remove(t.shadowGraphics),t.dispose());this.list=this.list.filter(t=>t.isAlive)}removeDeadShot(){for(let t of this.shotList)t.isAlive||(this.graphics.remove(t.graphics),t.dispose());this.shotList=this.shotList.filter(t=>t.isAlive)}buildGraphics(){return new v.YJl}constructor(){this.list=[],this.shotList=[],this.countShotDown=0,this.count=0,this.graphics=this.buildGraphics(),this.shadowGraphics=this.buildGraphics()}}class N extends v.ubm{constructor(t,i,e){if(super(60,t/i),this.position.set(0,-800,800),this.lookAt(new v.Pq0(0,0,0)),"3"!=e)return;this.fov=10,this.far=1e4,this.updateProjectionMatrix(),this.position.set(0,-5e3,5e3)}}class R extends v.Z58{addObejects(t,i,e){this.add(i.graphics),this.add(i.shotList.graphics),this.add(e.graphics),this.add(t.graphics)}changeDifficulty(t,i,e){"1"==e?(this.add(t.shadowGraphics),this.add(i.shadowGraphics)):(this.remove(t.shadowGraphics),this.remove(i.shadowGraphics))}constructor(){super(),this.light=new v.dth(0xffffff,6316128,5),this.add(this.light)}}var C=e(6366),G=e.n(C);let I=t=>{let{playerLife:i,score:e}=t;return(0,h.useEffect)(()=>{i>0||(document.getElementById("gameOver").style.display="block")},[i]),(0,s.jsxs)("div",{id:"gameOver",className:G().gameOver,children:[(0,s.jsx)("div",{className:G().gameOverHeader,children:"GAME OVER"}),(0,s.jsxs)("div",{className:G().gameOverScore,children:["KILL SCORE: ",e]}),(0,s.jsxs)("button",{className:G().tweetButton,onClick:()=>{let t="記録は".concat(e,"点でした！"),i=location.href;window.open("https://x.com/intent/post?text=".concat(t,"&url=").concat(i,"&hashtags=").concat("NanameShooting,MaxenceStudio"))},children:[(0,s.jsx)("span",{className:G().twitterStr,children:"\uD835\uDD4F"})," でシェア"]})]})},z=t=>{let{width:i,height:e,setPlayerLife:r,setScore:o}=t,[n,a]=(0,h.useState)("2"),[c,d]=(0,h.useState)(0),p=(0,h.useRef)(0),m=(0,h.useRef)(new x),v=(0,h.useRef)(new M),_=(0,h.useRef)(new D),y=g(),b=(0,h.useRef)(new R);b.current.addObejects(m.current,v.current,_.current);let S=(0,h.useRef)(new N(i,e,n)),O=(0,h.useRef)(void 0);(0,h.useEffect)(()=>{O.current=new l.JeP({canvas:document.getElementById("game")}),O.current.setPixelRatio(window.devicePixelRatio),O.current.setSize(i,e)},[]),(0,h.useEffect)(()=>{document.body.addEventListener("keydown",t=>t.preventDefault())},[]),(0,h.useEffect)(()=>{b.current.changeDifficulty(v.current,_.current,n)},[n]),(0,h.useEffect)(()=>{S.current=new N(i,e,n)},[n]);let P=()=>v.current.life>0;return f(()=>{void 0!==O.current&&(m.current.tick(),P()&&(v.current.tick(y,_.current.list,_.current.shotList),r(v.current.life)),_.current.tick(v.current.shotList,v.current.position),P()&&o(p.current+=_.current.countShotDown),O.current.render(b.current,S.current))},d),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:u().gameContainer,children:[(0,s.jsx)("canvas",{id:"game",width:i,height:e,className:u().gameCanvas}),(0,s.jsx)(I,{playerLife:v.current.life,score:p.current})]}),(0,s.jsx)(w,{difficulty:n,setDifficulty:a}),(0,s.jsx)("span",{className:u().fps,children:c})]})};var F=e(2366),q=e.n(F);let T=()=>{(0,h.useEffect)(()=>(document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}),[]);let t=t=>{if("a"!=t.key&&"d"!=t.key&&"ArrowLeft"!=t.key&&"ArrowRight"!=t.key&&"w"!=t.key&&"s"!=t.key&&"ArrowUp"!=t.key&&"ArrowDown"!=t.key&&"e"!=t.key&&"q"!=t.key&&"x"!=t.key&&"z"!=t.key)return;let i=document.getElementById("bgm");i.volume=.1,i.play()};return(0,s.jsxs)("div",{className:q().bgm,children:[(0,s.jsx)("audio",{id:"bgm",src:"./bgm.mp3",controls:!0,autoPlay:!0,loop:!0,children:(0,s.jsx)("p",{children:"お使いのブラウザでは再生できません"})}),(0,s.jsxs)("span",{className:q().bgmDesc,children:["BGM: ",(0,s.jsx)("b",{children:"Miss! Hit! Miss! Miss!"})," - ",(0,s.jsxs)("span",{className:q().composer,children:["by ","Mr.O"]})]})]})};var H=e(2082),B=e.n(H);let Y=()=>(0,s.jsx)("div",{className:B().version,children:(0,s.jsx)("code",{className:B().currentVersion,children:"v1.3.0"})}),V=()=>{let[t,i]=(0,h.useState)(5),[e,r]=(0,h.useState)(0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Naname Shooting"}),(0,s.jsxs)("div",{className:o().scores,children:[(0,s.jsxs)("span",{id:"pl-score",className:o().pl_score,children:["PLAYER'S LIFE: ",t]}),(0,s.jsxs)("span",{id:"en-score",className:o().en_score,children:["KILL SCORE: ",e]})]}),(0,s.jsx)(z,{width:640,height:480,setPlayerLife:i,setScore:r}),(0,s.jsx)(T,{}),(0,s.jsx)(c,{}),(0,s.jsx)(Y,{})]})}}},t=>{var i=i=>t(t.s=i);t.O(0,[391,334,636,593,792],()=>i(6760)),_N_E=t.O()}]);