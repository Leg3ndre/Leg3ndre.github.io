(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2366:t=>{t.exports={bgm:"bgmAudio_bgm__3Ys8j",bgmDesc:"bgmAudio_bgmDesc__dlJyd",composer:"bgmAudio_composer__RI_3P"}},3273:t=>{t.exports={desc:"gameDesc_desc__azcQI",abstract:"gameDesc_abstract__p4doZ",playManual:"gameDesc_playManual__7ktkN"}},3413:t=>{t.exports={difficulty:"gameDifficulty_difficulty__mNYtG"}},4744:(t,i,s)=>{"use strict";s.r(i),s.d(i,{default:()=>q});var e=s(7876),r=s(5855),h=s.n(r),o=s(4232),n=s(3273),a=s.n(n);let c=()=>(0,e.jsxs)("div",{className:a().desc,children:[(0,e.jsx)("p",{className:a().abstract,children:"固定視点の3Dシューティングゲームです。 プレイヤーから見て右上にカメラが固定されているため、上移動と左移動の区別は遠近感でがんばってください。"}),(0,e.jsxs)("ul",{className:a().playManual,children:[(0,e.jsx)("li",{children:"画面右から次々現れる敵を倒し、スコアを稼いでください"}),(0,e.jsx)("li",{children:"プレイヤーが操作する自機は赤い紙飛行機です。敵に弾を当てると倒すことができます"}),(0,e.jsx)("li",{children:"敵の弾が自機に当たるとライフが減ります"}),(0,e.jsx)("li",{children:"※ 現状では自機のライフが0になってもゲームは終了しません"}),(0,e.jsx)("li",{children:"操作方法"}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"↑ or W: 上へ移動"}),(0,e.jsx)("li",{children:"↓ or S: 下へ移動"}),(0,e.jsx)("li",{children:"← or A: 左へ移動"}),(0,e.jsx)("li",{children:"→ or D: 右へ移動"}),(0,e.jsx)("li",{children:"X or E: 前へ移動"}),(0,e.jsx)("li",{children:"Z or Q: 後ろへ移動"}),(0,e.jsx)("li",{children:"Space or Enter: 弾を発射"})]})]})]});var l=s(4796),d=s(9120),u=s.n(d),p=s(3413),m=s.n(p);let w=t=>{let{difficulty:i,setDifficulty:s}=t,r=t=>{s(t.target.value)};return(0,e.jsx)("div",{className:m().difficulty,children:[{label:"簡単モード（オブジェクトの影を表示）",value:"1"},{label:"普通モード",value:"2"},{label:"難関モード（遠近感をなくす）",value:"3"}].map(t=>(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"radio",name:"difficulty",value:t.value,checked:t.value==i,onChange:r}),t.label]},t.value))})},f=()=>{let t=(0,o.useRef)({});(0,o.useEffect)(()=>(document.addEventListener("keydown",i),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",s)}),[]);let i=i=>{t.current[i.key]=!0},s=i=>{delete t.current[i.key]};return t.current},g=(t,i)=>{let s=(0,o.useRef)(0),e=(0,o.useRef)(0),r=(0,o.useRef)(0),h=(0,o.useRef)(0),n=(0,o.useRef)([]),a=(0,o.useCallback)(()=>{s.current=requestAnimationFrame(a);let i=Date.now();i-e.current<16.666666666666668||(e.current=i,t(),c())},[t]),c=()=>{let t=Date.now();n.current.push(t),n.current=n.current.slice(-100),t-r.current<1e3||(r.current=t,h.current=n.current.length/((t-n.current[0])/1e3),i(Math.round(10*h.current)/10))};(0,o.useEffect)(()=>(s.current=requestAnimationFrame(a),()=>cancelAnimationFrame(s.current)),[a])};var b=s(6691);class y{buildGraphics(){let t=new b.YJl;for(let i of this.wLines)t.add(i);for(let i of this.sLines)t.add(i);return t}buildSLines(){let t=[];for(let i=0;i<=16;++i){let s=new b.LoY;s.setFromPoints(this.buildSLineEdges(i)),t.push(new b.N1A(s,this.material))}return t}buildWLines(){let t=[];for(let i=0;i<=32;++i){let s=new b.LoY;s.setFromPoints(this.buildWLineEdges(i)),t.push(new b.N1A(s,this.material))}return t}buildSLineEdges(t){let i=50*t-400;return[new b.Pq0(-800,i,-400),new b.Pq0(800,i,-400)]}buildWLineEdges(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=50*t-800,e=i%50;return[new b.Pq0(s-e,-400,-400),new b.Pq0(s-e,400,-400)]}moveWLines(t){for(let[i,s]of this.wLines.entries())s.geometry.setFromPoints(this.buildWLineEdges(i,t))}constructor(){this.material=new b.mrM({color:0xc0d0e0}),this.sLines=this.buildSLines(),this.wLines=this.buildWLines()}}class v{tick(){this.count+=this.VELOCITY,this.builder.moveWLines(this.count)}constructor(){this.VELOCITY=3,this.count=0,this.builder=new y,this.graphics=this.builder.buildGraphics()}}class x{buildGraphics(){return this.group.add(this.buildWing()),this.group.add(this.buildBody()),this.group}buildWing(){let t=new b.LoY;return t.setFromPoints(this.buildWingEdges()),new b.N1A(t,this.material)}buildWingEdges(){let t=this.r;return[new b.Pq0(+t,0*t,0),new b.Pq0(t*Math.cos(2*Math.PI/3),t*Math.sin(2*Math.PI/3),0),new b.Pq0(t*Math.cos(4*Math.PI/3),t*Math.sin(4*Math.PI/3),0),new b.Pq0(+t,0*t,0)]}buildBody(){let t=new b.LoY;return t.setFromPoints(this.buildBodyEdges()),new b.N1A(t,this.material)}buildBodyEdges(){let t=this.r;return[new b.Pq0(+t,0,0*t),new b.Pq0(t*Math.cos(2*Math.PI/3),0,0),new b.Pq0(t*Math.cos(4*Math.PI/3),0,t*Math.sin(4*Math.PI/3)),new b.Pq0(+t,0,0*t)]}colorNormal(){for(let t of this.group.children)t.material=this.material}colorAttacked(){for(let t of this.group.children)t.material=this.materialAttacked}buildShadow(){let t=new b.LoY;t.setFromPoints(this.buildWingEdges());let i=new b.mrM({color:this.shadowColor}),s=new b.YJl;return s.add(new b.eaF(t,i)),s}constructor(){this.material=new b.mrM({color:0xff0000}),this.materialAttacked=new b.mrM({color:0xffffff}),this.group=new b.YJl,this.r=20,this.shadowColor=9474192}}class _{buildGraphics(){return new b.eaF(this.geometry,this.material)}dispose(){this.material.dispose(),this.geometry.dispose()}constructor(t,i){this.wSegments=32,this.hSegments=15,this.material=new b.V9B({color:t}),this.geometry=new b.Gu$(i,this.wSegments,this.hSegments)}}class S{tick(){this.position.add(this.velocity),this.position.x>800&&(this.isAlive=!1),this.position.x<-960&&(this.isAlive=!1),this.position.y>800&&(this.isAlive=!1),this.position.y<-800&&(this.isAlive=!1),this.position.z>800&&(this.isAlive=!1),this.position.z<-800&&(this.isAlive=!1)}isAttacking(t,i){let s=this.radius+i,e=this.position.clone().sub(t);return Math.abs(e.x)<s&&Math.abs(e.y)<s&&Math.abs(e.z)<s}dispose(){this.builder.dispose()}constructor(t,i,s){this.radius=10,this.isAlive=!0,this.builder=new _(s,this.radius),this.graphics=this.builder.buildGraphics(),Object.assign(this.graphics.position,t.clone()),this.position=this.graphics.position,this.velocity=i.clone()}}class M{tick(){for(let t of this.list)t.tick();this.removeDeadShot()}generate(t){let i=new S(t,new b.Pq0(this.velocity,0,0),this.SHOT_COLOR);this.list.push(i),this.graphics.add(i.graphics)}isAttacking(t,i){for(let s of this.list)if(s.isAttacking(t,i))return!0;return!1}removeDeadShot(){for(let t of this.list)t.isAlive||(this.graphics.remove(t.graphics),t.dispose());this.list=this.list.filter(t=>t.isAlive)}constructor(){this.list=[],this.velocity=10,this.SHOT_COLOR=0xd0d000,this.graphics=new b.YJl}}class P{tick(t,i,s){this.updatePosition(t),this.shoot(t),this.shotList.tick(),this.processDameged(i,s),this.isInvincible()&&this.restIFrame--}updatePosition(t){let i=this.position;(t.w||t.ArrowUp)&&(i.z+=this.velocity),(t.s||t.ArrowDown)&&(i.z-=this.velocity),(t.a||t.ArrowLeft)&&(i.y+=this.velocity),(t.d||t.ArrowRight)&&(i.y-=this.velocity),(t.e||t.x)&&(i.x+=this.velocity),(t.q||t.z)&&(i.x-=this.velocity),this.regularizePosition(),this.shadowGraphics.position.x=i.x,this.shadowGraphics.position.y=i.y,this.shadowGraphics.position.z=-400}regularizePosition(){this.position.x=Math.max(Math.min(this.position.x,800),-800),this.position.y=Math.max(Math.min(this.position.y,400),-400),this.position.z=Math.max(Math.min(this.position.z,400),-400)}shoot(t){if(this.restSFrame>0){this.restSFrame-=1;return}(t[" "]||t.Enter)&&(this.shotList.generate(this.position),this.restSFrame=60/this.SHOOT_PER_SEC)}processDameged(t,i){!this.isInvincible()&&this.detectAttacked(t,i)&&(this.life--,this.restIFrame=30),this.isInvincible()?this.builder.colorAttacked():this.builder.colorNormal()}detectAttacked(t,i){for(let i of t)if(i.isAttacking(this.position,this.radius))return!0;for(let t of i)if(t.isAttacking(this.position,this.radius))return!0;return!1}isInvincible(){return this.restIFrame>0}constructor(){this.radius=15,this.velocity=8,this.life=5,this.shotList=new M,this.SHOOT_PER_SEC=3,this.restSFrame=0,this.restIFrame=0,this.builder=new x,this.graphics=this.builder.buildGraphics(),this.shadowGraphics=this.builder.buildShadow(),this.position=this.graphics.position}}class E{buildGraphics(t){let i=new b.Zpd(t,0),s=new b.eaF(i,this.material);return s.rotation.z=-Math.PI/4,s.rotation.y=-Math.PI/3,this.group.add(s),this.group}doDeadAction(){this.group.rotation.x+=.4,this.group.rotation.z+=.4}buildShadow(t){let i=new b.LoY;i.setFromPoints([new b.Pq0(t*Math.cos(Math.PI/3),t*Math.sin(Math.PI/3),0),new b.Pq0(t*Math.cos(3*Math.PI/3),t*Math.sin(3*Math.PI/3),0),new b.Pq0(t*Math.cos(5*Math.PI/3),t*Math.sin(5*Math.PI/3),0)]);let s=new b.mrM({color:this.shadowColor}),e=new b.YJl;return e.add(new b.eaF(i,s)),e}dispose(){for(let t of this.group.children)t.material.dispose(),t.geometry.dispose()}constructor(t){this.shadowColor=9474192,this.material=new b.G_z({color:t}),this.group=new b.YJl}}class k{tick(t,i){if(this.isShotDown)return this.tickBeforeDead();this.count++,this.position.add(this.velocity),this.position.x<-1200&&(this.isAlive=!1),this.shadowGraphics.position.x=this.position.x,this.shadowGraphics.position.y=this.position.y,this.shadowGraphics.position.z=-400,t.isAttacking(this.position,this.radius)&&(this.isShotDown=!0)}tickBeforeDead(){this.countBeforeDead++;this.position.x+=1,this.position.z-=this.countBeforeDead,this.builder.doDeadAction(),this.countBeforeDead>=30&&(this.isAlive=!1)}shoot(t){return!this.isAlive||this.isShotDown||this.count*this.SHOOT_PER_SEC%60!=0?null:this.buildNewShot(t)}buildNewShot(t){let i=new b.Pq0;return i.randomDirection().multiplyScalar(this.SHOOT_SPEED),i.x=-Math.abs(i.x),i.add(this.velocity),new S(this.position,i,this.SHOT_COLOR)}isAttacking(t,i){if(!this.isAlive)return!1;let s=this.radius+i,e=this.position.clone().sub(t);return Math.abs(e.x)<s&&Math.abs(e.y)<s&&Math.abs(e.z)<s}dispose(){this.builder.dispose()}constructor(t=0xe0e0e0){this.radius=40,this.isAlive=!0,this.isShotDown=!1,this.SHOT_COLOR=0xe0e0e0,this.SHOOT_PER_SEC=10,this.SHOOT_SPEED=4,this.count=0,this.countBeforeDead=0,this.builder=new E(t),this.graphics=this.builder.buildGraphics(this.radius),this.shadowGraphics=this.builder.buildShadow(this.radius),Object.assign(this.graphics.position,new b.Pq0(800,(2*Math.random()-1)*400,(2*Math.random()-1)*400)),this.position=this.graphics.position,this.velocity=new b.Pq0(-3,0,0).multiplyScalar(1)}}let L=k;class O extends L{tick(t,i){this.updateVelocity(i),super.tick(t)}updateVelocity(t){this.velocity.y=-.008333333333333333*(this.position.y-t.y),this.velocity.z=-.008333333333333333*(this.position.z-t.z)}buildNewShot(t){let i=new b.Pq0;return i.x=-Math.abs(this.position.x-t.x),i.y=-(this.position.y-t.y),i.z=-(this.position.z-t.z),i.normalize().multiplyScalar(this.SHOOT_SPEED),new S(this.position,i,this.SHOT_COLOR)}constructor(){super(0xf04040),this.SHOT_COLOR=0xffd0d0,this.SHOOT_PER_SEC=5}}class A extends L{tick(t){this.randomizeVelocity(),super.tick(t)}randomizeVelocity(){let t=.5*(4+6*Math.random()),i=1-2*Math.floor(2*Math.random()),s=(.1*this.count+Math.random())*i;this.velocity.y=t*Math.cos(s),this.velocity.z=t*Math.sin(s)}constructor(){super(5263600),this.SHOT_COLOR=0xc0d0ff}}class D extends L{buildNewShot(){let t=.6*this.count/60,i=new b.Pq0(-.5,Math.sin(5*t)*Math.cos(t),Math.sin(5*t)*Math.sin(t));return i.normalize().multiplyScalar(this.SHOOT_SPEED),i.add(this.velocity),new S(this.position,i,this.SHOT_COLOR)}constructor(){super(57344),this.SHOT_COLOR=0xd0ffd0,this.SHOOT_PER_SEC=15,this.SHOOT_SPEED=1}}class j{tick(t,i){for(let s of(this.count++,this.canGenerate()&&this.generate(),this.list)){s.tick(t,i);let e=s.shoot(i);null!=e&&(this.shotList.push(e),this.graphics.add(e.graphics))}for(let t of(this.removeDeadEnemies(),this.shotList))t.tick();this.removeDeadShot()}generate(){let t,i=Math.floor(3e4*Math.random());t=i%3==0?new O:i%3==1?new A:new D,this.list.push(t),this.graphics.add(t.graphics),this.shadowGraphics.add(t.shadowGraphics)}canGenerate(){return this.count<=1800?this.count%180==0:this.count<=3600?this.count%120==0:this.count<=7200?this.count%60==0:this.count%30==0}removeDeadEnemies(){for(let t of(this.countShotDown=this.list.filter(t=>!t.isAlive&&t.isShotDown).length,this.list))t.isAlive||(this.graphics.remove(t.graphics),this.shadowGraphics.remove(t.shadowGraphics),t.dispose());this.list=this.list.filter(t=>t.isAlive)}removeDeadShot(){for(let t of this.shotList)t.isAlive||(this.graphics.remove(t.graphics),t.dispose());this.shotList=this.shotList.filter(t=>t.isAlive)}buildGraphics(){return new b.YJl}constructor(){this.list=[],this.shotList=[],this.countShotDown=0,this.count=0,this.graphics=this.buildGraphics(),this.shadowGraphics=this.buildGraphics()}}class R extends b.ubm{constructor(t,i,s){if(super(60,t/i),this.position.set(0,-800,800),this.lookAt(new b.Pq0(0,0,0)),"3"!=s)return;this.fov=10,this.far=1e4,this.updateProjectionMatrix(),this.position.set(0,-5e3,5e3)}}class G extends b.Z58{addObejects(t,i,s){this.add(i.graphics),this.add(i.shotList.graphics),this.add(s.graphics),this.add(t.graphics)}changeDifficulty(t,i,s){"1"==s?(this.add(t.shadowGraphics),this.add(i.shadowGraphics)):(this.remove(t.shadowGraphics),this.remove(i.shadowGraphics))}constructor(){super(),this.light=new b.dth(0xffffff,6316128,5),this.add(this.light)}}let z=t=>{let{width:i,height:s,setPlayerLife:r,setScore:h}=t,[n,a]=(0,o.useState)("2"),[c,d]=(0,o.useState)(0),p=(0,o.useRef)(0),m=(0,o.useRef)(new v),b=(0,o.useRef)(new P),y=(0,o.useRef)(new j),x=f(),_=(0,o.useRef)(new G);_.current.addObejects(m.current,b.current,y.current);let S=(0,o.useRef)(new R(i,s,n)),M=(0,o.useRef)(void 0);return(0,o.useEffect)(()=>{M.current=new l.JeP({canvas:document.getElementById("game")}),M.current.setPixelRatio(window.devicePixelRatio),M.current.setSize(i,s)},[]),(0,o.useEffect)(()=>{document.body.addEventListener("keydown",t=>t.preventDefault())},[]),(0,o.useEffect)(()=>{_.current.changeDifficulty(b.current,y.current,n)},[n]),(0,o.useEffect)(()=>{S.current=new R(i,s,n)},[n]),g(()=>{void 0!==M.current&&(m.current.tick(),b.current.tick(x,y.current.list,y.current.shotList),r(b.current.life),y.current.tick(b.current.shotList,b.current.position),h(p.current+=y.current.countShotDown),M.current.render(_.current,S.current))},d),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("canvas",{id:"game",width:i,height:s,className:u().gameCanvas}),(0,e.jsx)(w,{difficulty:n,setDifficulty:a}),(0,e.jsx)("span",{className:u().fps,children:c})]})};var C=s(2366),I=s.n(C);let N=()=>{(0,o.useEffect)(()=>(document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}),[]);let t=t=>{("a"==t.key||"d"==t.key||"ArrowLeft"==t.key||"ArrowRight"==t.key||"w"==t.key||"s"==t.key||"ArrowUp"==t.key||"ArrowDown"==t.key||"e"==t.key||"q"==t.key||"x"==t.key||"z"==t.key)&&document.getElementById("bgm").play()};return(0,e.jsxs)("div",{className:I().bgm,children:[(0,e.jsx)("audio",{id:"bgm",src:"./bgm.mp3",controls:!0,autoPlay:!0,loop:!0,children:(0,e.jsx)("p",{children:"お使いのブラウザでは再生できません"})}),(0,e.jsxs)("span",{className:I().bgmDesc,children:["BGM: ",(0,e.jsx)("b",{children:"Miss! Hit! Miss! Miss!"})," - ",(0,e.jsxs)("span",{className:I().composer,children:["by ","Mr.O"]})]})]})},q=()=>{let[t,i]=(0,o.useState)(5),[s,r]=(0,o.useState)(0);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h1",{children:"Naname Shooting"}),(0,e.jsxs)("div",{className:h().scores,children:[(0,e.jsxs)("span",{id:"pl-score",className:h().pl_score,children:["PLAYER'S LIFE: ",t]}),(0,e.jsxs)("span",{id:"en-score",className:h().en_score,children:["KILL SCORE: ",s]})]}),(0,e.jsx)(z,{width:640,height:480,setPlayerLife:i,setScore:r}),(0,e.jsx)(N,{}),(0,e.jsx)(c,{})]})}},5855:t=>{t.exports={scores:"index_scores__c1eQ3",pl_score:"index_pl_score__VhfVA",en_score:"index_en_score__ilKsR"}},6760:(t,i,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4744)}])},9120:t=>{t.exports={gameCanvas:"gameCanvas_gameCanvas__v5Dar",fps:"gameCanvas_fps__GX8f1"}}},t=>{var i=i=>t(t.s=i);t.O(0,[391,334,636,593,792],()=>i(6760)),_N_E=t.O()}]);